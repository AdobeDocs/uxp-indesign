"use strict";(self.webpackChunkuxp_indesign=self.webpackChunkuxp_indesign||[]).push([[7081],{53848:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return m},default:function(){return h}});var o=a(87462),t=a(45987),s=(a(15007),a(64983)),r=a(91515);const i=["components"],m={},d=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",n)},l=d("InlineAlert"),p=d("CodeBlock"),c={_frontmatter:m},u=r.Z;function h(e){let{components:n}=e,a=(0,t.Z)(e,i);return(0,s.mdx)(u,(0,o.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"network-io"},"Network I/O"),(0,s.mdx)("p",null,"You may be looking for ways to make network calls for various reasons such as fetching an image, accessing a web API, browsing remote resources, synchronizing content, etc. UXP supports a range of network APIs that can fit your use case. "),(0,s.mdx)(l,{variant:"info",slots:"header, text1, text2",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"Plugins and Scripts"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"In plugins"),", you should seek permission for `",(0,s.mdx)("inlineCode",{parentName:"p"},"access in the manifest and specify the"),"domains` of the endpoints. ",(0,s.mdx)("br",null),"\nIMPORTANT: Please read about the ",(0,s.mdx)("a",{parentName:"p",href:"../../../plugins/concepts/manifest/#networkpermission"},"manifest permissions")," module before you proceed."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"In scripts"),", the permission for ",(0,s.mdx)("inlineCode",{parentName:"p"},"network")," is fixed. You can ignore the manifest details in the following examples. Learn about these values in the ",(0,s.mdx)("a",{parentName:"p",href:"../../fundamentals/manifest/"},"manifest fundamentals section"),". "),(0,s.mdx)("p",null,"The fastest way to try out a network call is by rendering an image from the web"),(0,s.mdx)(p,{slots:"heading, code",repeat:"2",languages:"HTML, JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"html"},"HTML"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-html"},"<img src='https://source.unsplash.com/random' />\n")),(0,s.mdx)("h4",{id:"manifest"},"manifest"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "https://source.unsplash.com"\n            ]\n        }\n    }\n}\n')),(0,s.mdx)("p",null,"As mentioned earlier, UXP has ",(0,s.mdx)("inlineCode",{parentName:"p"},"fetch"),", ",(0,s.mdx)("inlineCode",{parentName:"p"},"XHR (XML HTTP Request)"),", and ",(0,s.mdx)("inlineCode",{parentName:"p"},"WebSocket")," available in the global scope. If you aren't aware of the difference and want to understand which one is the right option for you, we recommend you learn about them first - ",(0,s.mdx)("a",{parentName:"p",href:"https://javascript.info/fetch"},"fetch")," | ",(0,s.mdx)("a",{parentName:"p",href:"https://javascript.info/websocket"},"WebSocket")," | ",(0,s.mdx)("a",{parentName:"p",href:"https://javascript.info/xmlhttprequest"},"XHR")),(0,s.mdx)("h2",{id:"examples"},"Examples"),(0,s.mdx)("p",null,"Now, let's look at some examples."),(0,s.mdx)("h3",{id:"fetch"},"fetch"),(0,s.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JavaScript, JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"javascript"},"JavaScript"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"async function foo() {\n    // Get weather forecast for San Jose\n    try {\n        const response = await fetch(`https://api.weather.gov/gridpoints/MTR/99,82/forecast`);\n        if (!response.ok) {\n            throw new Error(`HTTP error fetching weather station; status: ${response.status}`);\n        }\n        const responseJson = await response.json();\n        console.log(`Forecast ${responseJson.properties.periods[0].detailedForecast}`);\n\n    } catch (e) {\n        console.error(e);\n    }\n}\n")),(0,s.mdx)("h4",{id:"manifest-1"},"manifest"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "https://api.weather.gov"\n            ]\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"xhr"},"XHR"),(0,s.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JavaScript, JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"javascript-1"},"JavaScript"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"function foo() {\n    // Get weather forecast for San Jose via XHR\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', 'https://api.weather.gov/gridpoints/MTR/99,82/forecast');\n    xhr.responseType = 'json';\n    xhr.send();\n\n    xhr.onload = function() {\n        const responseObj = xhr.response;\n        console.log(`Forecast ${responseObj.properties.periods[0].detailedForecast}`);\n    };\n}\n")),(0,s.mdx)("h4",{id:"manifest-2"},"manifest"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "https://api.weather.gov"\n            ]\n        }\n    }\n}\n')),(0,s.mdx)("h3",{id:"websockets"},"WebSockets"),(0,s.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JavaScript, JSON",mdxType:"CodeBlock"}),(0,s.mdx)("h4",{id:"javascript-2"},"JavaScript"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},'let socket;\nasync function foo() {\n    // Establish web socket connection\n    if (!!socket) {\n        console.log("Already connected; disconnecting first.");\n        await socket.close();\n        return;\n      }\n\n    socket = new WebSocket("wss://javascript.info/article/websocket/demo/hello");\n\n    socket.onopen = function(e) {\n      console.log("Connection established");\n      // sending data to server\n      socket.send("My name is John");\n    };\n    \n    socket.onmessage = function(event) {\n      alert(`Data received from server: ${event.data}`);\n    };\n    \n    socket.onclose = function(event) {\n      console.log("Connection closed");\n      socket = null;\n    };\n    \n    socket.onerror = function(error) {\n      console.error(`Connection error ${error}`);\n    };\n}\n')),(0,s.mdx)("h4",{id:"manifest-3"},"manifest"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "wss://javascript.info"\n            ]\n        }\n    }\n}\n')),(0,s.mdx)("h2",{id:"additional-notes"},"Additional notes"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"These APIs are available in the global scope. Observe that you didn't have to mount them using ",(0,s.mdx)("inlineCode",{parentName:"li"},"require"),"."),(0,s.mdx)("li",{parentName:"ul"},"The ",(0,s.mdx)("inlineCode",{parentName:"li"},"domains")," in the plugin's manifest also let you configure variations of the endpoints. For example, your plugin may like to access 'api.dev.example.com', 'api.stage.example.com' or 'api.prod.example.com' depending upon the environment. You can configure the domains with ",(0,s.mdx)("inlineCode",{parentName:"li"},'["https://api.*.example.com"]')," to manage all three."),(0,s.mdx)("li",{parentName:"ul"},"While using ",(0,s.mdx)("inlineCode",{parentName:"li"},"http")," domains, keep in mind that Photoshop only allows http protocol on Win32 but not on macOS. InDesign has no such restrictions.")),(0,s.mdx)("h2",{id:"reference-material"},"Reference material"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"/uxp-indesign/indesign/uxp/reference/uxp-api/reference-js/Global%20Members/Data%20Transfers/fetch/"},"fetch API")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"/uxp-indesign/indesign/uxp/reference/uxp-api/reference-js/Global%20Members/Data%20Transfers/XMLHttpRequest/"},"XHR API")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"/uxp-indesign/indesign/uxp/reference/uxp-api/reference-js/Global%20Members/Data%20Transfers/WebSocket/"},"WebSocket API"))))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-recipes-network-index-md-b65fe986e8575e833dbc.js.map